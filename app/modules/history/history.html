<div ng-controller="HistoryController">
    <md-toolbar class="md-hue-3" layout="row" layout-align="space-between center">
        <md-button ng-click="refresh()"><i class="fa fa-refresh"></i></md-button>
    </md-toolbar>

    <md-list>
        <div ng-repeat="track in tracks track by $index">
            <div layout="column">
                <md-list-item class="md-2-line">
                    <img ng-src="{{track.sc.artwork_url}}" class="md-avatar" />
                    <div class="md-list-item-text" layout="column">
                        <h3>{{ track.sc.title }}</h3>
                        <h4>{{ track.sn.timestamp | beautifyDate }}</h4>
                    </div>
                    <div class="md-secondary">
                        <md-button class="md-icon-button" aria-label="playlater" ng-click="addToPlayNext(track)">
                            <i class="fa fa-hourglass-start">
                        <md-tooltip md-direction="top">add to next tracks</md-tooltip></i>
                        </md-button>
                        <md-button ng-show="!track.fullinfo" class="md-icon-button" aria-label="fullinfo" ng-click="track.fullinfo=!track.fullinfo">
                            <i class="fa fa-chevron-down"><md-tooltip md-direction="top">full info</md-tooltip></i>
                        </md-button>
                        <md-button ng-show="track.fullinfo" class="md-icon-button" aria-label="fullinfo" ng-click="track.fullinfo=!track.fullinfo">
                            <i class="fa fa-chevron-up"><md-tooltip md-direction="top">hide</md-tooltip></i>
                        </md-button>

                    </div>
                </md-list-item>
                <track ng-show="track.fullinfo" track="track.sc"></track>
            </div>
        </div>
    </md-list>
<md-list-item ng-show="hasMoreTracks"><md-button layout="row" flex="100" ng-click="loadMore()">load more tracks</md-button>
</md-list-item>
</div>